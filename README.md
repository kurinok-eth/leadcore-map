# Leadcore Map ‚Äî –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –†–§

React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º –†–§ –¥–ª—è 1–°-–ë–∏—Ç—Ä–∏–∫—Å. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SVG + GeoJSON –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü —Ä–µ–≥–∏–æ–Ω–æ–≤ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö API.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[SETUP_CHECKLIST.md](SETUP_CHECKLIST.md)** ‚Äî —á–µ–∫-–ª–∏—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞!)
- **[BITRIX_ADMIN_GUIDE.md](BITRIX_ADMIN_GUIDE.md)** ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ë–∏—Ç—Ä–∏–∫—Å
- **[INTEGRATION_GUIDE.md](INTEGRATION_GUIDE.md)** ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- **[CLAUDE.md](CLAUDE.md)** ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è Claude Code
- **[bitrix-component-example/](bitrix-component-example/)** ‚Äî –ø—Ä–∏–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è SVG-–∫–∞—Ä—Ç–∞ —Å zoom/drag
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞ (–º–æ–±–∏–ª—å–Ω—ã–µ, –ø–ª–∞–Ω—à–µ—Ç—ã, –¥–µ—Å–∫—Ç–æ–ø)
- –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, —Ä–µ–≥–∏–æ–Ω—É, –æ–∫—Ä—É–≥—É
- 87 —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–§ –≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–µ (–î–ù–†, –õ–ù–†, –ó–∞–ø–æ—Ä–æ–∂—Å–∫–∞—è, –•–µ—Ä—Å–æ–Ω—Å–∫–∞—è)

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- React 18+ / TypeScript
- SVG + GeoJSON (87 —Ä–µ–≥–∏–æ–Ω–æ–≤)
- react-zoom-pan-pinch (zoom/drag)
- Tailwind CSS
- Vite (—Å–±–æ—Ä–∫–∞ –≤ –æ–¥–∏–Ω –±–∞–Ω–¥–ª)

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
npm install
npm run dev        # localhost:5173
npm run build      # —Å–±–æ—Ä–∫–∞ –≤ dist/
npx tsc --noEmit   # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–º–≤–æ–ª—å–Ω—ã–µ –∫–æ–¥—ã —Å–≤–æ–π—Å—Ç–≤ –∏–Ω—Ñ–æ–±–ª–æ–∫–∞!**

–î–ª—è —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –∏–Ω—Ñ–æ–±–ª–æ–∫–µ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ —Å **—Ç–æ—á–Ω—ã–º–∏** —Å–∏–º–≤–æ–ª—å–Ω—ã–º–∏ –∫–æ–¥–∞–º–∏:

- `REGION_ID` ‚Äî ID —Ä–µ–≥–∏–æ–Ω–∞ –∏–ª–∏ —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–≥–∞
- `PHONE` ‚Äî –¢–µ–ª–µ—Ñ–æ–Ω
- `EMAIL` ‚Äî Email
- `POSITION` ‚Äî –î–æ–ª–∂–Ω–æ—Å—Ç—å

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:** `region_id`, `Region_Id`, `phone_number`
**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** `REGION_ID`, `PHONE`, `EMAIL` (–∑–∞–≥–ª–∞–≤–Ω—ã–µ, —Å –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è–º–∏)

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. **[BITRIX_ADMIN_GUIDE.md](BITRIX_ADMIN_GUIDE.md)**

## –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ 1–°-–ë–∏—Ç—Ä–∏–∫—Å

### 1. –°–±–æ—Ä–∫–∞

```bash
npm install
npm run build
```

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –≤ –ø–∞–ø–∫–µ `dist/`:
- `script.js` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –±–∞–Ω–¥–ª (~245KB)
- `style.css` ‚Äî —Å—Ç–∏–ª–∏
- `russia-regions.geojson` ‚Äî –¥–∞–Ω–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü —Ä–µ–≥–∏–æ–Ω–æ–≤

### 2. –§–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ö–æ–ø–∏—Ä—É–µ—Ç–µ –≤—Å—ë –∏–∑ `dist/` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```
/local/components/custom/russia.map/templates/.default/
‚îú‚îÄ‚îÄ script.js
‚îú‚îÄ‚îÄ style.css
‚îî‚îÄ‚îÄ russia-regions.geojson
```

### 3. template.php

–§—Ä–∞–≥–º–µ–Ω—Ç HTML ‚Äî **–±–µ–∑** `<!DOCTYPE>`, `<html>`, `<body>` –æ–±—ë—Ä—Ç–æ–∫, —Ç–∞–∫ –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ `bitrix-component-example/template.php`:**

```php
<?php if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) die(); ?>

<!-- –°—Ç–∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ -->
<link rel="stylesheet" href="/local/components/custom/russia.map/templates/.default/style.css">

<!-- –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –∏–∑ –ë–∏—Ç—Ä–∏–∫—Å -->
<script>
    window.bitrixMapData = <?= json_encode($arResult['REPRESENTATIVES'], JSON_UNESCAPED_UNICODE | JSON_HEX_QUOT | JSON_HEX_TAG | JSON_HEX_AMP | JSON_HEX_APOS) ?>;
    window.bitrixMapConfig = {
        isAdmin: <?= $USER->IsAdmin() ? 'true' : 'false' ?>
    };
</script>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ -->
<div id="russia-map-root"></div>

<!-- –°–∫—Ä–∏–ø—Ç –∫–∞—Ä—Ç—ã -->
<script src="/local/components/custom/russia.map/templates/.default/script.js"></script>
```

### 4. component.php

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ `bitrix-component-example/component.php`:**

–§–∞–π–ª –≤–∫–ª—é—á–∞–µ—Ç:
- –ó–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª—è –∏–Ω—Ñ–æ–±–ª–æ–∫–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª—å–Ω—ã–º–∏ –∫–æ–¥–∞–º–∏ —Å–≤–æ–π—Å—Ç–≤
- –û–±—Ä–∞–±–æ—Ç–∫—É –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–≥–æ–≤ (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –≤ –Ω—É–∂–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è React

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ:**
1. –£–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `$iblockId`
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–∏–º–≤–æ–ª—å–Ω—ã–µ –∫–æ–¥—ã —Å–≤–æ–π—Å—Ç–≤ ‚Äî `REGION_ID`, `PHONE`, `EMAIL`, `POSITION`

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. **[INTEGRATION_GUIDE.md](INTEGRATION_GUIDE.md)**

### 5. –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–∂–∏–¥–∞–µ—Ç `window.bitrixMapData`:

```json
[
  {
    "id": 1,
    "name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "position": "–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä",
    "phone": "+7 (495) 123-45-67",
    "email": "ivanov@leadcore.ru",
    "regionId": ["–¶–§–û", "–°–ó–§–û"],
    "activity": ["–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–µ", "–ì–æ—Å–ø–∏—Ç–∞–ª—å–Ω–æ–µ"]
  }
]
```

–ó–Ω–∞—á–µ–Ω–∏—è `regionId`:
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ–≥–∏–æ–Ω: `"RU-MOW"` (–ú–æ—Å–∫–≤–∞)
- –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥: `"–¶–§–û"` ‚Äî –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –≤–∏–¥–µ–Ω –≤–æ –≤—Å–µ—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö –æ–∫—Ä—É–≥–∞
- –ù–µ—Å–∫–æ–ª—å–∫–æ –æ–∫—Ä—É–≥–æ–≤: `["–¶–§–û", "–°–ó–§–û"]`

### 6. –ü—É—Ç—å –∫ GeoJSON

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç GeoJSON –ø–æ –ø—É—Ç–∏ `/russia-regions.geojson` –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è —Å–∞–π—Ç–∞. –ï—Å–ª–∏ —Ñ–∞–π–ª –ª–µ–∂–∏—Ç –Ω–µ –≤ –∫–æ—Ä–Ω–µ, –∏–∑–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –≤ `src/App.tsx` –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π:

```typescript
// src/App.tsx, —Å—Ç—Ä–æ–∫–∞ 44
const geoJsonResponse = await fetch('/local/components/custom/russia.map/templates/.default/russia-regions.geojson');
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—É—Ç–∏ ‚Äî –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ: `npm run build`.
