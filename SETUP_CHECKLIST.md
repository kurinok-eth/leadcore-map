# Чек-лист установки и настройки

Используйте этот чек-лист для быстрой проверки правильности установки компонента.

## 1. Создание инфоблока

- [ ] Создан инфоблок (например, "Представители")
- [ ] Созданы свойства со **строгими** символьными кодами:
  - [ ] `REGION_ID` — Строка
  - [ ] `PHONE` — Строка
  - [ ] `EMAIL` — Строка
  - [ ] `POSITION` — Строка
  - [ ] `ADDRESS` — Строка (опционально)
  - [ ] `ACTIVITY` — Список множественный (опционально)
  - [ ] `WORKING_HOURS` — Строка (опционально)

**Проверка:** Зайти в настройки инфоблока → вкладка "Свойства" → убедиться, что символьные коды **точно** совпадают (заглавные буквы, подчеркивания)

## 2. Заполнение элементов

- [ ] Добавлен хотя бы один элемент
- [ ] Заполнены обязательные поля:
  - [ ] Название элемента (ФИО)
  - [ ] `REGION_ID` (например, `ЦФО` или `RU-MOW`)
  - [ ] `PHONE` (например, `+7 913 384 35 50`)
  - [ ] `EMAIL` (например, `ivanov@leadcore.ru`)
  - [ ] `POSITION` (например, `Менеджер`)
- [ ] Элемент активен (`ACTIVE = Y`)

**Проверка значений `REGION_ID`:**
- Для федерального округа: `ЦФО`, `СЗФО`, `ЮФО`, `СКФО`, `ПФО`, `УФО`, `СФО`, `ДФО`
- Для конкретного региона: `RU-MOW`, `RU-SPE`, `RU-KYA` и т.д. (см. `BITRIX_ADMIN_GUIDE.md`)
- Для нескольких округов: `ЦФО,СЗФО` (через запятую без пробелов или с пробелами — `component.php` обработает)

## 3. Установка компонента

- [ ] Создана папка `/local/components/custom/russia.map/`
- [ ] Скопирован `.description.php` (из `bitrix-component-example/.description.php`)
- [ ] Скопирован `component.php` (из `bitrix-component-example/component.php`)
- [ ] В `component.php` указан правильный `$iblockId` (найти строку `$iblockId = 0;` и заменить на ID вашего инфоблока)
- [ ] Создана папка `/local/components/custom/russia.map/templates/.default/`
- [ ] Скопирован `template.php` (из `bitrix-component-example/template.php`)
- [ ] Скопированы собранные файлы:
  - [ ] `dist/script.js` → `/local/components/custom/russia.map/templates/.default/script.js`
  - [ ] `dist/style.css` → `/local/components/custom/russia.map/templates/.default/style.css`
  - [ ] `public/russia-regions.geojson` → `/local/components/custom/russia.map/templates/.default/russia-regions.geojson`

## 4. Вставка компонента на страницу

- [ ] Вставлен код на страницу:
```php
<?php
$APPLICATION->IncludeComponent(
    "custom:russia.map",
    ".default",
    [],
    false
);
?>
```

## 5. Проверка работоспособности

### В браузере:

- [ ] Открыта страница с компонентом
- [ ] Нажата клавиша F12 → вкладка Console
- [ ] В консоли выполнена команда: `console.log(window.bitrixMapData)`
- [ ] **Ожидаемый результат:** массив объектов с данными представителей
  ```javascript
  [
    {
      id: 1,
      name: "Иванов Иван Иванович",
      position: "Менеджер",
      phone: "+7 913 384 35 50",
      email: "ivanov@leadcore.ru",
      regionId: "ЦФО"
    },
    // ...
  ]
  ```
- [ ] **Если `undefined`:** данные не передаются из PHP → проверить шаги 1-3
- [ ] **Если неправильная структура:** проверить символьные коды свойств в инфоблоке

### Визуальная проверка:

- [ ] Карта России отображается
- [ ] При наведении на регион появляется подсветка и тултип с названием
- [ ] При клике на регион открывается правая панель с представителями
- [ ] Телефон и email отображаются и являются кликабельными ссылками
- [ ] ФИО переносится на новую строку, если не помещается
- [ ] Переключатель "КАРТА" / "СПИСОК" работает
- [ ] В режиме "СПИСОК" работает поиск по имени, региону, округу
- [ ] Внизу страницы отображается статистика

### Проверка логики федеральных округов:

- [ ] Создан представитель с `regionId: 'ЦФО'`
- [ ] При клике на любой регион ЦФО (Москва, Московская область, Тульская область и т.д.) — представитель отображается
- [ ] При клике на регион другого округа (например, Санкт-Петербург из СЗФО) — представитель НЕ отображается

## 6. Если что-то не работает

### Данные не загружаются:
→ См. `INTEGRATION_GUIDE.md` раздел "Отладка"

### Неправильные коды регионов:
→ См. `BITRIX_ADMIN_GUIDE.md` раздел "Поле ID Региона"

### Проблемы с отображением:
→ См. `CLAUDE.md` раздел "Известные проблемы и решения"

### Компонент не появляется в списке Битрикс:
→ Проверить наличие `.description.php` в `/local/components/custom/russia.map/`

## 7. Финальная проверка

Перед запуском в продакшн:

- [ ] В консоли браузера нет ошибок JavaScript
- [ ] Все регионы кликабельны
- [ ] Телефоны и email работают как ссылки
- [ ] Представители отображаются в правильных регионах
- [ ] Мобильная версия работает (pinch-zoom, перетаскивание)
- [ ] Производительность приемлемая (нет лагов при zoom/drag)

---

## Быстрые ссылки на документацию

- **Для администратора Битрикс:** `BITRIX_ADMIN_GUIDE.md`
- **Для разработчика (интеграция):** `INTEGRATION_GUIDE.md`
- **Для Claude Code:** `CLAUDE.md`
- **Примеры файлов компонента:** папка `bitrix-component-example/`
